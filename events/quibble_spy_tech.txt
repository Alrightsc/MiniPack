namespace = quibble_spy_tech

country_event = { # SEND TO FUNDING
	id = quibble_spy_tech.1
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		save_event_target_as = temptech
		country_event = { id = quibble_neighbors.1 }
	}
}

country_event = { #SELECT RESEARCH BRANCH
	id = quibble_spy_tech.3
	title = "quibble_spy_tech.3.name"
	desc = "quibble_spy_tech.3.desc"
	is_triggered_only = yes
	custom_gui = quibble_spy_window

	picture_event_data = {
		portrait = event_target:quibble_leader
		room = quibble_7_room
	}

	diplomatic = yes

	option = {
		name = quibble_spy_tech.3.a
		custom_gui = quibble_spy_option
		hidden_effect = {
			set_country_flag = eng
			country_event = { id = quibble_spy_tech.5 } #eng
		}
	}

	option = {
		name = quibble_spy_tech.3.b
		custom_gui = quibble_spy_option
		hidden_effect = {
			set_country_flag = phys
			country_event = { id = quibble_spy_tech.5 } #PHYSICS
		}
	}

	option = {
		name = quibble_spy_tech.3.c
		custom_gui = quibble_spy_option
		hidden_effect = {
			set_country_flag = soc
			country_event = { id = quibble_spy_tech.5 } #soc
		}
	}
}

country_event = { # SEND TO FUNDING
	id = quibble_spy_tech.5
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		save_event_target_as = tech
		country_event = { id = quibble_funding.1 }
	}
}


#JUST FAIL
country_event = {
	id = quibble_spy_tech.6
	title = "quibble_spy_tech.6.name"
	desc = "quibble_spy_tech.6.desc"
	is_triggered_only = yes
	custom_gui = quibble_spy_window

	picture_event_data = {
		portrait = event_target:quibble_leader
		room = quibble_8_room
	}

	diplomatic = yes

	option = {
		name = quibble_spy_tech.6.a
		custom_gui = quibble_spy_option
		hidden_effect = {
			remove_country_flag = current_espionage2
		}
	}

}

#GET TECH AI NOTCIES #PHYSICS
country_event = {
	id = quibble_spy_tech.31
	title = "quibble_spy_tech.31.name"
	desc = "quibble_spy_tech.31.desc"
	is_triggered_only = yes
	custom_gui = quibble_spy_window
	picture_event_data = {
		portrait = event_target:quibble_leader
		room = quibble_10_room
	}

	diplomatic = yes

	option = { #APOLOGIES
		name = quibble_spy_tech.31.a
		custom_gui = quibble_spy_option
		hidden_effect = {
			remove_country_flag = fail_limit
			country_event = { id = quibble_spy_tech.8 }
			remove_country_flag = current_espionage2
		}
	}
		

	option = { #KEEP RESEARCH
		name = quibble_spy_tech.31.b
		custom_gui = quibble_spy_option
		hidden_effect = {
			remove_country_flag = fail_limit
			country_event = { id = quibble_spy_tech.9 }
			remove_country_flag = current_espionage2
			country_event = { id = quibble_spy_tech_phys.1 }
		}
		
	}
		
}

#GET TECH AI NOTCIES #ENGINEERING
country_event = {
	id = quibble_spy_tech.32
	title = "quibble_spy_tech.32.name"
	desc = "quibble_spy_tech.32.desc"
	is_triggered_only = yes
	custom_gui = quibble_spy_window
	picture_event_data = {
		portrait = event_target:quibble_leader
		room = quibble_10_room
	}

	diplomatic = yes

	option = { #APOLOGIES
		name = quibble_spy_tech.32.a
		custom_gui = quibble_spy_option
		hidden_effect = {
			remove_country_flag = fail_limit
			country_event = { id = quibble_spy_tech.8 }
			remove_country_flag = current_espionage2
		}
	}
		

	option = { #KEEP RESEARCH
		name = quibble_spy_tech.32.b
		custom_gui = quibble_spy_option
		hidden_effect = {
			remove_country_flag = fail_limit
			country_event = { id = quibble_spy_tech.9 }
			remove_country_flag = current_espionage2
			country_event = { id = quibble_spy_tech_eng.1 }
		}
		
	}
		
}

#GET TECH AI NOTCIES #SOCIETY
country_event = {
	id = quibble_spy_tech.33
	title = "quibble_spy_tech.33.name"
	desc = "quibble_spy_tech.33.desc"
	is_triggered_only = yes
	custom_gui = quibble_spy_window
	picture_event_data = {
		portrait = event_target:quibble_leader
		room = quibble_10_room
	}

	diplomatic = yes

	option = { #APOLOGIES
		name = quibble_spy_tech.33.a
		custom_gui = quibble_spy_option
		hidden_effect = {
			remove_country_flag = fail_limit
			country_event = { id = quibble_spy_tech.8 }
			remove_country_flag = current_espionage2
		}
	}
		

	option = { #KEEP RESEARCH
		name = quibble_spy_tech.33.b
		custom_gui = quibble_spy_option
		hidden_effect = {
			remove_country_flag = fail_limit
			country_event = { id = quibble_spy_tech.9 }
			remove_country_flag = current_espionage2
			country_event = { id = quibble_spy_tech_soc.1 }
		}
		
	}
		
}

#APOLOGES
country_event = {
	id = quibble_spy_tech.8
	title = "quibble_spy_tech.8.name"
	desc = "quibble_spy_tech.8.desc"
	is_triggered_only = yes
	show_sound = event_default

	picture_event_data = {
		portrait = event_target:firstsabotagetarget
		planet_background = event_target:firstsabotagetarget
		graphical_culture = event_target:firstsabotagetarget
		city_level = event_target:firstsabotagetarget
		room = event_target:firstsabotagetarget.ruler
	}

	diplomatic = yes
	option = { 
		name = quibble_spy_tech.8.a
		event_target:tech_firstsabotagetarget = {
			add_opinion_modifier = {
				who = root
				modifier = opinion_quibble_bad_medium
			}
		}
		hidden_effect = {
			remove_country_flag = fail_limit
			remove_country_flag = current_espionage2
		}
	}
}

#KEPT RESEARCH
country_event = {
	id = quibble_spy_tech.9
	title = "quibble_spy_tech.9.name"
	desc = "quibble_spy_tech.9.desc"
	is_triggered_only = yes
	show_sound = event_default

	picture_event_data = {
		portrait = event_target:firstsabotagetarget
		planet_background = event_target:firstsabotagetarget
		graphical_culture = event_target:firstsabotagetarget
		city_level = event_target:firstsabotagetarget
		room = event_target:firstsabotagetarget.ruler
	}

	diplomatic = yes

	option = { 
		name = quibble_spy_tech.9.a
		event_target:firstsabotagetarget = {
			add_opinion_modifier = {
				who = root
				modifier = opinion_quibble_bad_high
			}
		}
		hidden_effect = {
			remove_country_flag = fail_limit
			remove_country_flag = current_espionage2
		}
	}

	option = { 
		name = quibble_spy_tech.9.b
		event_target:firstsabotagetarget = {
			add_opinion_modifier = {
				who = root
				modifier = opinion_quibble_bad_high
			}
		}
		hidden_effect = {
			remove_country_flag = fail_limit
			remove_country_flag = current_espionage2
		}
	}
}

#JUST FAIL
country_event = {
	id = quibble_spy_tech.12
	title = "quibble_spy_tech.12.name"
	desc = "quibble_spy_tech.12.desc"
	is_triggered_only = yes
	custom_gui = quibble_spy_window

	picture_event_data = {
		portrait = event_target:quibble_leader
		room = quibble_8_room
	}

	diplomatic = yes

	option = {
		name = quibble_spy_tech.6.a
		custom_gui = quibble_spy_option
		hidden_effect = {
			remove_country_flag = current_espionage2
		}
	}

}
