namespace = quibble_spy_ai_menu


country_event = { #TRIGGER EVENT AND CHECK
    id = quibble_spy_ai_menu.1
	force_open = yes
    is_triggered_only = yes
    
    trigger = {
        is_ai = yes
        OR = {
            is_country_type = default
        }
    }

    immediate = {
        IF = {
            limit = {
                has_country_flag = aispy_cooldown
            }
            country_event = { id = quibble_spy_ai_menu.3 }
        }
        ELSE = {
            country_event = { id = quibble_spy_ai_menu.2 }
        }
    }
}

country_event = { #AI MAIN MENU
	id = quibble_spy_ai_menu.2
    is_triggered_only = yes

    immediate = {
        save_event_target_as = snitch_home
		set_timed_country_flag = {
			flag = aispy_cooldown
            days = 535
        }
        random_list = {
            20 = {  #SABOTAGING 
                country_event = { id = quibble_spy_sab.1 days = 90 random = 45 }
            }

            17 = { #STEALING TECH 
                country_event = { id = quibble_spy_ai_tech.1 days = 90 random = 45 }
            }

            14 = {  #BOOSTING 
                country_event = { id = quibble_spy_ai_boost.1 days = 90 random = 45 }
            }

            17 = { #WARHELP
                if = {
                    limit = {
                        is_at_war = yes
                    }
                    country_event = { id = quibble_spy_ai_warhelp.1 days = 90 random = 45 } 
                }
                else = {
                    country_event = { id = quibble_spy_sab.1 days = 90 random = 45 }
                }
                
            }
            1 = {  #NO NEIGHBORS
                modifier = {
                    factor = 6.00
                    NOT = { 
                        any_neighbor_country = {
                            is_country_type = default
                            has_communications = event_target:snitch_home
                        }
                    }
                }
            }
        }
    }
}


country_event = { #TRIGGER EVENT AND CHECK
    id = quibble_spy_ai_menu.3
    is_triggered_only = yes
    hide_window = yes
}
